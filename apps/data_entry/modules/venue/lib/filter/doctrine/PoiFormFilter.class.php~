<?php

/**
 * Venue filter form.
 *
 * @package    filters
 * @subpackage TVenue *
 * @version    SVN: $Id: sfDoctrineFormFilterTemplate.php 11675 2008-09-19 15:21:38Z fabien $
 */
class PoiFormFilter extends BasePoiFormFilter
{
  public function configure()
  {

  }
   /**
     * list parameter is not part of the doctrine record but by adding it to the filter array in session, doctrine calls
     * this method is called
     *
     * @param $query
     * @param $field
     * @param $value
     * @return Doctrine_Query
     */
    public function addListColumnQuery( $query, $field, $value)
    {
        switch ( $value )
        {

            case 'non-geocoded':
                    $query->andWhere( '(latitude is NULL AND longitude is NULL) OR (latitude = 0 AND longitude = 0)' );
                break;

            case 'geocoded':
                    $query->andWhere( '(latitude is NOT NULL AND longitude is NOT NULL) AND (latitude != 0 AND longitude != 0) ' );
                break;
        }

        return $query;
    }



    /**
     * adding the list to the fields list
     *
     * @return unknown
     */
    public function getFields()
    {
        $fields = parent::getFields();
        $fields['list'] = 'custom'; var_dump($fields);
        return $fields;
    }

}
